# Citatum FastAPI Service - Environment Variables
# Copy this file to .env and fill in your actual values
# This file is used by docker-compose.yml for the FastAPI service

# ---- Application Configuration ----
APP_NAME=Citatum
APP_VERSION=0.1.0

# ---- API Keys ----
# Get your API keys from:
# - OpenAI: https://platform.openai.com/api-keys
# - Anthropic: https://console.anthropic.com/
# - Cohere: https://dashboard.cohere.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here
COHERE_API_KEY=your_cohere_api_key_here

# ---- Database Configuration ----
# These are used to construct DATABASE_URL (which is auto-set by docker-compose)
# For Docker, POSTGRES_HOST should be 'postgres' (the service name)
POSTGRES_USER=your_postgres_user
POSTGRES_PASSWORD=your_postgres_password
POSTGRES_DB=your_postgres_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# DATABASE_URL is automatically set by docker-compose.yml
# For local development outside Docker, uncomment and set:
# DATABASE_URL=postgresql+asyncpg://your_postgres_user:your_postgres_password@localhost:5432/your_postgres_db

# ---- Vector Database Configuration ----
# Options: pgvector, chroma, pinecone, weaviate, qdrant
VECTOR_DB_TYPE=pgvector
VECTOR_DB_PATH=./data/vector_db
VECTOR_DB_HOST=localhost

# Vector similarity distance method (applies to all providers)
# Options: cosine (default), l2 (Euclidean), inner_product (dot product)
VECTOR_DB_DISTANCE_METHOD=cosine

# PGVector-specific settings
# Index type: hnsw (default, fast queries) or ivfflat (faster build, requires threshold)
PGVECTOR_INDEX_TYPE=hnsw
# Minimum rows before creating IVFFlat index (only applies when PGVECTOR_INDEX_TYPE=ivfflat)
PGVECTOR_INDEX_THRESHOLD=100

# ---- Embedding Model Configuration ----
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536

# ---- LLM Configuration ----
# Options: openai, anthropic, cohere
LLM_PROVIDER=openai
LLM_MODEL=gpt-4o-mini
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000

# ---- RAG Configuration ----
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
TOP_K_RETRIEVAL=5

# ---- Server Configuration ----
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=false

# ---- File Upload Configuration ----
FILE_ALLOWED_TYPES=application/pdf,text/plain
FILE_MAX_SIZE_MB=100

# ---- Logging Configuration ----
LOG_LEVEL=INFO

# ---- CORS Configuration ----
# Comma-separated list of allowed origins, or "*" for all
CORS_ORIGINS=*

# ---- Celery Configuration ----
# Celery broker URL (RabbitMQ or Redis)
# For Docker, use service name with credentials from RABBITMQ_DEFAULT_USER and RABBITMQ_DEFAULT_PASS
# The docker-compose.yml will construct this automatically from env/.env.rabbitmq
# For local development, set this explicitly:
# CELERY_BROKER_URL=amqp://your_rabbitmq_user:your_rabbitmq_password@localhost:5672//
CELERY_BROKER_URL=amqp://guest:guest@rabbitmq:5672//
# Celery result backend URL (Redis)
# For Docker, use service name: redis://redis:6379/0
# Note: Inside containers, use redis:6379. From host machine, Redis is exposed on port 6380
CELERY_RESULT_BACKEND=redis://redis:6379/0
